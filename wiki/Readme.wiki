#summary はじめにお読みください
#labels Featured

= !MacVim-!KaoriYa =

<wiki:toc max_depth="2" /> 

== インストール先 ==

アプリケーションフォルダ以外の場所に置いても動作するようになっています。


== アンインストール ==

  * アプリケーションフォルダの!MacVimアイコン
  * ホームフォルダ/ライブラリ/Preferences/org.vim.!MacVim.plist
を削除します。


== vimrc/gvimrc ==

  # !MacVim.app/Contents/Resources/vim/vimrc
  # ホームフォルダ/.vimrc または `_`vimrc
  # !MacVim.app/Contents/Resources/vim/gvimrc
  # ホームフォルダ/.gvimrc または `_`gvimrc

の順番で読み込まれます。読み込まれたスクリプトは

 [http://www.ac.cyberhome.ne.jp/~yakahaira/vimdoc/repeat.html#:scriptnames :scriptnames]

にて確認できます。

GUIに関する設定、たとえば columns, lines, guioptions, transparency, antialias, colorscheme などの設定は ホームフォルダ/.gvimrc または `_`gvimrc にて設定することをオススメします。

!MacVim(含!MacVim-!KaoriYa)かどうかを判別するには

{{{
has('gui_macvim')
}}}

を使用します。

!MacVim-!KaoriYaかどうかを判別するには、上記に加えて、

{{{
has('kaoriya')
}}}

を使用します。

{{{
has('gui_running')
}}}

で、GUI動作中(!MacVim.app実行中)かどうか判別できます。


== 香り屋版の情報 ==

Scratchバッファプラグインの動作がおかしいなどの場合は、ホームフォルダ/.vimrcまたは `_`vimrcで、香り屋版のコマンド類を読み込まないように設定します([http://www.serendip.ws/archives/1687 http://www.serendip.ws/archives/1687])

{{{
let plugin_cmdex_disable = 1
}}}

香り屋版のvimrc, gvimrcを読ませないようにするにはこちら → [http://relaxedcolumn.blog8.fc2.com/blog-entry-153.html MacVim-Kaoriyaでデフォルトのvimrcとgvimrcを読まないようにする http://relaxedcolumn.blog8.fc2.com/blog-entry-153.html]


== migemo検索 ==

{{{
g/ 順方向migemo検索
g? 逆方向migemo検索
}}}

== ツールバー ==

ツールバーを非表示にしたい場合は
{{{
set guioptions-=T
}}}

ツールバーを表示したい場合は
{{{
set guioptions+=T
}}}


== 半透明 ==

ウインドウを半透明にしたい場合は
{{{
set transparency=10    (不透明 0〜100 透明)
}}}


== 言語環境 ==

Finderから!MacVimアイコンの「情報を見る」「言語」で日本語のチェックを外すと、英語環境で起動します。


== 文字コード判別 ==

[http://yukihiro.nakadaira.googlepages.com/#chardet gauche_guess] により、自動的に文字コードの判別を行います。

fileencodings(fencs) は設定不要です。.vimrcなどでfileencodings(fencs)を設定すると文字コード判別が動作しなくなります。


== コンソールからの使用 ==

Terminal.appやiTerm.appから使用する場合は、

 [http://github.com/splhack/macvim/raw/master/src/MacVim/mvim mvimシェルスクリプト]

が便利です。mvim ファイル名 で使用できます。もしくは、たとえばzshのエイリアスでも、

{{{
alias vi='env LANG=ja_JP.UTF-8 /Applications/MacVim.app/Contents/MacOS/Vim "$@"'
}}}

などとすると vi ファイル名 で使用できます。デフォルトのvimrcを読み込ませたくない場合は、

{{{
alias vi='env LANG=ja_JP.UTF-8 /Applications/MacVim.app/Contents/MacOS/Vim -u $HOME/.vimrc "$@"'
}}}

とすると良いでしょう。

コンソールから!MacVim.appを使用する場合は、

{{{
alias gvim='env LANG=ja_JP.UTF-8 open -a /Applications/MacVim.app "$@"'
}}}

としておけば、gvim ファイル名 で!MacVim.appで編集できます。


== 日本語入力(IM)自動オン/オフ ==

入力モードから抜ける時、入る時などに、自動的に日本語入力(IM)をオン/オフにする機能が入っています(iminsertなどに反映されます)。

自動的に日本語入力(IM)をオンにする機能のみ禁止するには

{{{
set imdisableactivate
}}}

を設定し、自動的に日本語入力(IM)をオン/オフにする機能すべてを禁止するには

{{{
set imdisable
}}}

を設定してください。


== SKK ==

{{{
inoremap <silent> <C-j> <C-^>
}}}

を設定すると良いでしょう。


== +perl / +python / +ruby ==

デフォルトでMac OS X 10.6 (Snow Leopard)の標準パスからperl/python/rubyのdylibを動的に読み込みます。

!MacPortsなどのdylibを使用したい場合は .vimrc にて

{{{
let $PERL_DLL = "/opt/local/lib/perl5/5.10.0/darwin-2level/CORE/libperl.dylib"
let $PYTHON_DLL = "/opt/local/lib/libpython2.6.dylib"
let $RUBY_DLL = "/opt/local/lib/libruby.dylib"
}}}

のように指定します。perl5.10.0, python2.6(2.5), ruby1.8.xと互換です。perl5.8.8,5.8.9,5.10.1とは非互換となります。

非互換のものは[Building ソースコードからビルドする]ことで使用できます。


== 実験的レンダラ ==

メニューバーの「!MacVim」「環境設定…」より「詳細」タブにて

{{{
実験的レンダラを使用する
}}}

チェックボックスをONにすると、実験的レンダラにより、標準状態より高速に動作します。表示上の問題がある可能性もありますが、ほぼ問題なく使用できます。


== 文字間幅 ==

!Terminal.appなどでdefaultsコマンドにて設定できますが、日本語環境では表示が不完全です。

{{{
defaults write org.vim.MacVim MMCellWidthMultiplier 0.8
}}}


== ウインドウ拡大 ==

「ウインドウ」「拡大」にて横方向も拡大したい場合に設定します。

{{{
defaults write org.vim.MacVim MMZoomBoth -boolean YES
}}}


== ctags ==

[http://wiki.github.com/splhack/ctags-objc-ja Objective-C 対応 Exuberant Ctags 日本語対応版] を同梱しています。

{{{
!ctags
}}}

などで使用できます。コマンドラインからは

{{{
alias ctags='/Applications/MacVim.app/Contents/MacOS/ctags "$@"'
}}}

などとすると良いでしょう。

[http://www.vim.org/scripts/script.php?script_id=273 taglist.vim] では以下の設定でObjective-Cに対応できます。

{{{
let tlist_objc_settings='objc;P:protocols;i:interfaces;I:implementations;M:instance methods;C:implementation methods;Z:protocol methods'
}}}